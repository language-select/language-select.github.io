//https://language-select.github.io
!(function({console:t,customElements:e,document:s,CustomEvent:a,HTMLElement:i,Object:o,setTimeout:n}=window){const l=(t,{append:e=[],style:a={},attrs:i={},...n}={},l=s.createElement(t))=>(l.append(...e),o.assign(l,n)),c=(t,e={})=>l("style",{textContent:t,...e}),d=({is:t,part:e="flag-"+t,flag:s=l("flag-"+t),detail:a=9999})=>(s.setAttribute("detail",a),s.setAttribute("part",e),s),r="connectedDoneCallback",h="renderedCallback",p="language-select",g=p+"remove",u="language-selected-by-flag",b="selectable",E="dialog",m=t=>`[part="${t}"]`,A="flag-language",_={_LANGUAGE_SELECT_FLAGS_:{name:"language-select-flags",css:":host{--selectbackground:green;--selectcolor:beige;--flagbackground:beige}"+m(E)+"{user-select:none}"+m(E)+"{border:none;border-radius:6px;box-shadow:0 4px 4px rgba(0,0,0,.3)}"+m("title")+"{text-align:center}svg{width:10%;cursor:pointer}",animationcss:"dialog{opacity:0;transform:scale(.3);transition:opacity .3s ease,transform .3s ease}dialog::backdrop{background:rgba(0,0,0,.3);animation:fadeIn .3s ease}@keyframes fadeIn{to{opacity:1}}@keyframes fadeOut{from{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(0.3)}}"},_LANGUAGE_SELECTORS_:{name:"language-selectors",css:":host{display:flex;flex-wrap:wrap;gap:.7em;max-width:1180px;user-select:none}:host>*{flex:1 1 7%}",selected:(t,e=t)=>`:host([selected*='${t}']) ${A}[is='${e}']{order:1;background:var(--selectbackground);color:var(--selectcolor)}`},_LANGSELECTORS_FLAG_:{name:A,css:`:host{display:inline-block;display:grid;padding:.5em;max-width:100px}:host{order:3;pointer-events:none}:host(.${b}){order:2;opacity:1;cursor:pointer;pointer-events:auto;background:var(--flagbackground,lightgrey)}:host(:not(.${b})){ display:var(--notselectabledisplay,initial); background:var(--notselectablebackground,none); color:var(--notselectablecolor,black); opacity:var(--notselectableopacity,.2)}`+m("label")+"{font-size:var(--select-language-font-size,16px);text-align:center;min-width:80px}"}},L=class extends i{$listen({type:t,func:e,scope:a=s,options:i={}}){a.addEventListener(t,e,i);let o=()=>a.removeEventListener(t,e,i);return this.listeners=this.listeners||[],this.listeners.push(o),o}$emit({type:t="CustomEvent",detail:e={},bubbles:s=!0,composed:i=!0,scope:o=this}){o.dispatchEvent(new a(t,{detail:e,bubbles:s,composed:i}))}connectedCallback(){this[r]&&this[r](),this[h]&&n((()=>this[h]()),1)}disconnectedCallback(){this.listeners?.forEach((t=>t()))}};e.define(_._LANGUAGE_SELECT_FLAGS_.name,class extends L{[r](){this.attachShadow({mode:"open"}).append(c(_._LANGUAGE_SELECT_FLAGS_.css),c(_._LANGUAGE_SELECT_FLAGS_.animationcss),this.dialog=l(E,{part:E,append:[l("h2",{part:"title",textContent:this.getAttribute("caption")||"Select Your Language",onclick:()=>this.$emit({type:g,scope:this})}),this.ALLSELECTORS=l(_._LANGUAGE_SELECTORS_.name,{host:this.host})],onclick:t=>{t.target===this.dialog&&(this.dialog.close(),this.$emit({type:g}))}})),this.dialog.onanimationend=()=>{this.dialog.style.opacity="1",this.dialog.style.transform="scale(1)"},this.$listen({type:u,func:({detail:e})=>{t.log(`%c (document) Event: ${p} `,"background:gold",e),this.$emit({type:p,detail:e,scope:this}),
//! set the selected language on <language-selectors>
this.host&&(this.host.label(e.iso),this.host.setAttribute("selected",e.iso)),this.$emit({type:g})}}),this.$listen({type:g,func:()=>{this.dialog.onanimationend=()=>{this.dialog.close(),this.remove()},this.dialog.style.animation="fadeOut .5s ease"}}),this.showModal()}showModal(){const t=this.getAttribute("selected");this.ALLSELECTORS.setAttribute("selected",t),this.dialog.showModal&&this.dialog.showModal()}}),e.define(_._LANGUAGE_SELECTORS_.name,class extends L{[r](){let t=o.keys(this.host.languages),e=t,s=this.host.getAttribute("languages"),a=s?.split(",")||t,i=_._LANGUAGE_SELECTORS_.selected("en","duo"),n=e.map((t=>{const e="en"==t?"duo":t;i+=_._LANGUAGE_SELECTORS_.selected(e);let s=l(A,{is:t,host:this.host});return s.classList.toggle(b,a.includes(t)),s}));this.attachShadow({mode:"open"}).append(c(_._LANGUAGE_SELECTORS_.css,{id:_._LANGUAGE_SELECTORS_.name}),c(i,{id:_._LANGUAGE_SELECTORS_.name+"-selected"}),...n),this.onclick=()=>{this.$emit({type:g,scope:this})}}}),e.define(_._LANGSELECTORS_FLAG_.name,class extends L{[r](){let t=this.is||"en";"en"==t&&(t="duo");let e,s=this.host.languages[t]||"English";this.attachShadow({mode:"open"}).append(c(_._LANGSELECTORS_FLAG_.css),this.flag=d({is:t,part:"flag",alt:s,detail:9999,host:this.host}),l("div",{part:"label",textContent:s})),e=this.flag.querySelector("img"),e&&(e.setAttribute("draggable","false"),e.setAttribute("alt",s)),this.setAttribute("is",t),this.setAttribute("alt",s),this.onclick=()=>this.$emit({type:u,detail:{iso:"duo"==t?"en":t,language:s,node:this}})}}),e.define("flag-duo",class extends i{connectedCallback(t=this.getAttribute("is")||"us,gb",[e,s]=t.split(","),a=("gb"==s?"100% 100%,-2% 100%,100%-1%":"100% 100%,0 100%,100% 0"),[i,o="50%",n=o]=(this.getAttribute("split")||"").split(":")){"v"==i?a=`${o} 0, ${n} 100%, 100% 100%, 100% 0`:"h"==i&&(a=`0 ${o}, 100% ${n}, 100% 100%, 0 100%`),this.attachShadow({mode:"open"}).append(c(`:host{position:relative;aspect-ratio:4/3}:host>*{position:absolute}[part="part2"]{clip-path:polygon(${a})}img{width:95%}`),d({is:e,part:"part1"}),d({is:s,part:"part2"}))}})})();