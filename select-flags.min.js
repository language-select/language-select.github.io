!function({console:console,customElements:customElements,document:document,CustomEvent:CustomEvent,HTMLElement:HTMLElement,Object:Object,setTimeout:setTimeout}=window){const createElement=(tag,{append:append=[],style:style={},attrs:attrs={},...props}={},element=document.createElement(tag))=>(element.append(...append),Object.assign(element,props)),createSTYLEElement=(textContent,props={})=>createElement("style",{textContent:textContent,...props}),createFlagMeisterFlag=({is:is,part:part="flag-"+is,flag:flag=createElement("flag-"+is),detail:detail=9999})=>(flag.setAttribute("detail",detail),flag.setAttribute("part",part),flag),_EVENT_REMOVE_="language-selectremove",part=name=>`[part="${name}"]`,_WC={_LANGUAGE_SELECT_FLAGS_:{name:"language-select-flags",css:":host{--selectbackground:green;--selectcolor:beige;--flagbackground:beige}"+part("dialog")+"{user-select:none}"+part("dialog")+"{border:none;border-radius:6px;box-shadow:0 4px 4px rgba(0,0,0,.3)}"+part("title")+"{text-align:center}svg{width:10%;cursor:pointer}",animationcss:"dialog{opacity:0;transform:scale(.3);transition:opacity .3s ease,transform .3s ease}dialog::backdrop{background:rgba(0,0,0,.3);animation:fadeIn .3s ease}@keyframes fadeIn{to{opacity:1}}@keyframes fadeOut{from{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(0.3)}}"},_LANGUAGE_SELECTORS_:{name:"language-selectors",css:":host{display:flex;flex-wrap:wrap;gap:.7em;max-width:1180px;user-select:none}:host>*{flex:1 1 7%}",selected:(hostlang,listlang=hostlang)=>`:host([selected*='${hostlang}']) flag-language[is='${listlang}']{order:1;background:var(--selectbackground);color:var(--selectcolor)}`},_LANGSELECTORS_FLAG_:{name:"flag-language",css:":host{display:inline-block;display:grid;padding:.5em;max-width:100px}:host{order:3;pointer-events:none}:host(.selectable){order:2;opacity:1;cursor:pointer;pointer-events:auto;background:var(--flagbackground,lightgrey)}:host(:not(.selectable)){ display:var(--notselectabledisplay,initial); background:var(--notselectablebackground,none); color:var(--notselectablecolor,black); opacity:var(--notselectableopacity,.2)}"+part("label")+"{font-size:var(--select-language-font-size,16px);text-align:center;min-width:80px}"}},BaseClassElement=class extends HTMLElement{$listen({type:type,func:func,scope:scope=document,options:options={}}){scope.addEventListener(type,func,options);let remove=()=>scope.removeEventListener(type,func,options);return this.listeners=this.listeners||[],this.listeners.push(remove),remove}$emit({type:type="CustomEvent",detail:detail={},bubbles:bubbles=!0,composed:composed=!0,scope:scope=this}){scope.dispatchEvent(new CustomEvent(type,{detail:detail,bubbles:bubbles,composed:composed}))}connectedCallback(){this.connectedDoneCallback&&this.connectedDoneCallback(),this.renderedCallback&&setTimeout((()=>this.renderedCallback()),1)}disconnectedCallback(){this.listeners?.forEach((remove=>remove()))}};customElements.define(_WC._LANGUAGE_SELECT_FLAGS_.name,class extends BaseClassElement{connectedDoneCallback(){this.attachShadow({mode:"open"}).append(createSTYLEElement(_WC._LANGUAGE_SELECT_FLAGS_.css),createSTYLEElement(_WC._LANGUAGE_SELECT_FLAGS_.animationcss),this.dialog=createElement("dialog",{part:"dialog",append:[createElement("h2",{part:"title",textContent:this.getAttribute("caption")||"Select Your Language",onclick:()=>this.$emit({type:_EVENT_REMOVE_,scope:this})}),this.ALLSELECTORS=createElement(_WC._LANGUAGE_SELECTORS_.name,{host:this.host})],onclick:event=>{event.target===this.dialog&&(this.dialog.close(),this.$emit({type:_EVENT_REMOVE_}))}})),this.dialog.onanimationend=()=>{this.dialog.style.opacity="1",this.dialog.style.transform="scale(1)"},this.$listen({type:"language-selected-by-flag",func:({detail:detail})=>{
//! set the selected language on <language-selectors>
if(console.log("%c (document) Event: language-select ","background:gold;color:blue",detail),this.$emit({type:"language-select",detail:detail,scope:this}),this.host){this.host.label(detail.iso),this.host.setAttribute("selected",detail.iso),console.error("set flag in button",detail.iso);let iso="en"==detail.iso?"duo":detail.iso;this.host.labelflag.innerHTML=`<flag-${iso} part="svg flag" style="width:100%;height:auto"></flag-${iso}>`}this.$emit({type:_EVENT_REMOVE_})}}),this.$listen({type:_EVENT_REMOVE_,func:()=>{this.dialog.onanimationend=()=>{this.dialog.close(),this.remove()},this.dialog.style.animation="fadeOut .5s ease"}}),this.showModal()}showModal(){const ISO=this.getAttribute("selected");this.ALLSELECTORS.setAttribute("selected",ISO),this.dialog.showModal&&this.dialog.showModal()}}),customElements.define(_WC._LANGUAGE_SELECTORS_.name,class extends BaseClassElement{connectedDoneCallback(){let LANGUAGES_ISO_CODES=Object.keys(this.host.languages),isocodes=LANGUAGES_ISO_CODES,languages=this.host.getAttribute("languages"),selectableLangs=languages?.split(",")||LANGUAGES_ISO_CODES,styleselect=_WC._LANGUAGE_SELECTORS_.selected("en","duo"),allflags=isocodes.map((is=>{const UIis="en"==is?"duo":is;styleselect+=_WC._LANGUAGE_SELECTORS_.selected(UIis);let flag=createElement("flag-language",{is:is,host:this.host});return flag.classList.toggle("selectable",selectableLangs.includes(is)),flag}));this.attachShadow({mode:"open"}).append(createSTYLEElement(_WC._LANGUAGE_SELECTORS_.css,{id:_WC._LANGUAGE_SELECTORS_.name}),createSTYLEElement(styleselect,{id:_WC._LANGUAGE_SELECTORS_.name+"-selected"}),...allflags),this.onclick=()=>{this.$emit({type:_EVENT_REMOVE_,scope:this})}}}),customElements.define(_WC._LANGSELECTORS_FLAG_.name,class extends BaseClassElement{connectedDoneCallback(){let is=this.is||"en";"en"==is&&(is="duo");let img,language=this.host.languages[is]||"English";this.attachShadow({mode:"open"}).append(createSTYLEElement(_WC._LANGSELECTORS_FLAG_.css),this.flag=createFlagMeisterFlag({is:is,part:"flag",alt:language,detail:9999,host:this.host}),createElement("div",{part:"label",textContent:language})),img=this.flag.querySelector("img"),img&&(img.setAttribute("draggable","false"),img.setAttribute("alt",language)),this.setAttribute("is",is),this.setAttribute("alt",language),this.onclick=()=>this.$emit({type:"language-selected-by-flag",detail:{iso:"duo"==is?"en":is,language:language,node:this}})}}),customElements.define("flag-duo",class extends HTMLElement{connectedCallback(is=this.getAttribute("is")||"us,gb",[one,two]=is.split(","),polygon=("gb"==two?"100% 100%,-2% 100%,100%-1%":"100% 100%,0 100%,100% 0"),[HV,p1="50%",p2=p1]=(this.getAttribute("split")||"").split(":")){"v"==HV?polygon=`${p1} 0, ${p2} 100%, 100% 100%, 100% 0`:"h"==HV&&(polygon=`0 ${p1}, 100% ${p2}, 100% 100%, 0 100%`),this.attachShadow({mode:"open"}).append(createSTYLEElement(`:host{position:relative;aspect-ratio:4/3}:host>*{position:absolute}[part="part2"]{clip-path:polygon(${polygon})}img{width:95%}`),createFlagMeisterFlag({is:one,part:"part1"}),createFlagMeisterFlag({is:two,part:"part2"}))}})}();