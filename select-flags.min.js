//https://language-select.github.io
!(function({console:e,customElements:t,document:s,CustomEvent:a,HTMLElement:i,Object:o,setTimeout:l}=window){const[n,c,d,h,r,g,p,u,b,m,f,y]="append,define,attachShadow,shadowRoot,innerHTML,getAttribute,setAttribute,querySelector,addEventListener,removeEventListener,onclick,part".split(","),x=(e,t={})=>{let a=s.createElement(e);return t[n]&&(a[n](...t[n]),delete t[n]),o.assign(a,t)},$=(e,t={})=>x("style",{textContent:e,...t}),k=({is:e,part:t="flag-"+e,flag:s=x("flag-"+e),detail:a=9999})=>(s[p]("detail",a),s[p](y,t),s),v="connectedDoneCallback",w="renderedCallback",C="language-select",E=C+"remove",L="language-selected-by-flag",M="selectable",O="dialog",S=e=>`[part="${e}"]`,T="flag-language",z={c:{name:"language-select-flags",css:":host{--selectcolor:lightgreen;--flagbackground:lightgrey}"+S(O)+"{user-select:none}"+S(O)+"{border:none;border-radius:6px;box-shadow:0 4px 4px rgba(0,0,0,.3)}"+S("title")+"{text-align:center}svg{width:10%;cursor:pointer}",animationcss:"dialog{opacity:0;transform:scale(.3);transition:opacity .3s ease, transform .3s ease}dialog::backdrop{background:rgba(0,0,0,.3);animation:fadeIn .3s ease}@keyframes fadeIn{to{opacity:1}}@keyframes fadeOut{from{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(0.3)}}"},b:{name:"language-selectors",css:":host{display:flex;flex-wrap:wrap;gap:.7em;max-width:1180px;user-select:none}:host>*{flex:1 1 7%}",selected:(e,t=e)=>`:host([selected*='${e}']) ${T}[is='${t}']{order:1;background:var(--selectcolor)}`},a:{name:T,css:`:host{display:inline-block;display:grid;padding:.5em;max-width:100px}:host{order:3;background:#eee;opacity:.3;pointer-events:none}:host(.${M}){order:2;opacity:1;cursor:pointer;pointer-events:auto;background:var(--flagbackground,lightgrey)}img{max-width:100%;aspect-ratio:4/3}`+S("label")+"{font-size:var(--select-language-font-size,16px);text-align:center}"}},A=class extends i{$1({type:e,func:t,scope:a=s,options:i={}}){a[b](e,t,i);let o=()=>a[m](e,t,i);return this.c=this.c||[],this.c.push(o),o}$2({type:e="CustomEvent",detail:t={},bubbles:s=!0,composed:i=!0,scope:o=this}){o.dispatchEvent(new a(e,{detail:t,bubbles:s,composed:i}))}connectedCallback(){this[v]&&this[v](),this[w]&&l((()=>this[w]()),1)}disconnectedCallback(){this.c?.forEach((e=>e()))}};t[c](z.c.name,class extends A{[v](){this[d]({mode:"open"})[n]($(z.c.css),$(z.c.animationcss),this.dialog=x(O,{[y]:O,append:[x("h2",{[y]:"title",textContent:this[g]("caption")||"Select Your Language",[f]:()=>this.$2({type:E,scope:this})}),this.e=x(z.b.name,{host:this.host})],[f]:e=>{e.target===this.dialog&&(this.dialog.close(),this.$2({type:E}))}}));let t=this.dialog;t.onanimationend=()=>{t.style.opacity="1",t.style.transform="scale(1)"},this.$1({type:L,func:({detail:t})=>{e.log(`%c (document) Event: ${C} `,"background:gold",t),this.$2({type:C,detail:t,scope:this}),this.host&&(this.host.label.textContent=t.language,this.host[p]("selected",t.iso)),this.$2({type:E,scope:this})}}),this.$1({type:E,func:()=>{this.dialog.style.animation="fadeOut .3s ease",l((()=>this.remove()),300)}}),this.showModal()}showModal(){let e=this[g]("selected");"en"==e&&(e="gb"),this.e[p]("selected",e),this.dialog.showModal&&this.dialog.showModal()}}),t[c](z.b.name,class extends A{[v](){let e,t=o.keys(this.host.languages),s=t,a=this.host[g]("languages"),i=a?.split(",")||t,l=z.b.selected("gb","duo"),c=s.map((t=>{e="us"==t||"gb"==t?"duo":t,l+=z.b.selected(e);let s=x(T,{is:t,host:this.host});return s.classList.toggle(M,i.includes(t)),s}));this[d]({mode:"open"})[n]($(z.b.css,{id:z.b.name}),$(l,{id:z.b.name+"-selected"}),...c),this[f]=()=>{this.$2({type:E,scope:this})}}}),t[c](z.a.name,class extends A{[v](){let e=this.is||"en";"us"!=e&&"gb"!=e||(e="duo");let t,s=this.host.languages[e]||"English";this[d]({mode:"open"})[n]($(z.a.css),this.flag=k({is:e,[y]:"flag",alt:s,detail:9999,host:this.host}),x("div",{[y]:"label",textContent:s})),t=this.flag[u]("img"),t&&(t[p]("draggable","false"),t[p]("alt",s)),this[p]("is",e),this[p]("alt",s),this[f]=()=>this.$2({type:L,detail:{iso:"duo"==e?"en":e,language:s,node:this}})}}),t[c]("flag-duo",class extends i{connectedCallback(e=this[g]("is")||"us,gb",[t,s]=e.split(","),a=("gb"==s?"100% 100%,-2% 100%,100%-1%":"100% 100%,0 100%,100% 0"),[i,o="50%",l=o]=(this[g]("split")||"").split(":")){"v"==i?a=`${o} 0, ${l} 100%, 100% 100%, 100% 0`:"h"==i&&(a=`0 ${o}, 100% ${l}, 100% 100%, 0 100%`),this[d]({mode:"open"})[n]($(`:host{position:relative;aspect-ratio:4/3}:host>*{position:absolute}[part="part2"]{clip-path:polygon(${a})}img{width:95%}`),k({is:t,[y]:"part1"}),k({is:s,[y]:"part2"}))}})})();